// Name:           Forms
// Description:    Form styles
//
// Namespace:      `form`
//
// Modifiers:      `component-modifier`
//
// States:         `component-state`
//
// ========================================================================


// Variables
// ========================================================================

$form-background-color = #fafafa
$form-font-size = $font-small
$form-font-size-sm = $font-small
$form-font-size-lg = $font-large
$form-padding-y = 1rem
$form-padding-x = 1.4rem


// Component: Forms
// ========================================================================

.form__group
  &:not(:last-child)
    margin-bottom 1.6rem



// Form element Label
.form__label
  display block
  padding .6rem 0
  font-size $font-small


// Form element Input
.form__input
  appearance none
  display block
  position relative
  width 100%
  height 4.2rem
  padding $form-padding-y $form-padding-x
  background $form-background-color
  color $core-text-color
  font-size $form-font-size
  line-height 1.4
  border $core-border-width solid $core-border-color
  border-radius $core-radius
  transition all .2s ease
  &:focus
    background-color $color-white
    border-color $color-primary
    control-shadow($color-primary)
    transition all .2s ease

  &::placeholder
    color $color-grey-500

  &.form__input--raised
    core-shadow()

  &.form__input--contrast
    background $color-grey-1000
    border-color $color-grey-1000
    &:focus
      background $form-background-color
      border-color $color-primary

  &.form__input--sm
    font-size $font-small
    height 3.2rem
    padding .1rem .8rem

  &.input-inline
    display inline-flex
    vertical-align middle
    width auto

  // Input types
  &[type="file"]
    height auto



// Form element Input hint
.form__input--hint
  margin-top .4rem
  color $color-grey-400
  font-size $font-small



// Form element Select
.form__select
  padding $form-padding-y $form-padding-x
  width 100%
  appearance none
  border $core-border-width solid $core-border-color
  border-radius $core-radius
  color inherit
  font-size $form-font-size
  line-height 2rem
  outline none
  vertical-align middle
  
    option
      padding .2rem .4rem


  &:not([multiple])
    background $form-background-color url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23667189' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .75rem center / .8rem 1rem

  &:focus
    border-color $color-primary
    control-shadow($color-primary)

  &::-ms-expand
    display none


  // Select sizes
  &.select-sm
    font-size $form-font-size-sm
    height 2.4rem
    padding .1rem 2rem .1rem .6rem


  &.select-lg
    font-size $form-font-size-lg
    height 4rem
    padding .9rem 2.4rem .9rem .8rem



// Form validation states
.form__group
  &.form__group--error
    & .form__input
      border-color $color-red
      &:focus
        control-shadow($color-red)
    & .form__input--hint
      color $color-red




// Form element Checkbox and Radio
.form__checkbox,
.form__radio,
.form__switch
  display inline-block
  font-size $font-small
  line-height 2rem
  position relative

  input
    clip rect(0, 0, 0, 0)
    height .1rem
    margin -.1rem
    overflow hidden
    position absolute
    width .1rem
    &:focus + .form__icon
      border-color $color-primary
      // .control-shadow()

    &:checked + .form__icon
      background $color-primary
      border-color $color-primary



  .form__icon
    border $core-border-width solid $core-border-color
    cursor pointer
    display inline-block
    position absolute



.form__checkbox,
.form__radio
  padding .2rem 2rem

  .form__icon
    height 1.4rem
    left 0
    top .5rem
    width 1.4rem


  input
    &:active + .form__icon
      background $core-border-color



.form__checkbox
  .form__icon
    border-radius $core-radius


  input
    &:checked + .form__icon
      &::before
        background-clip padding-box
        border .2rem solid $core-border-color
        border-left-width 0
        border-top-width 0
        content ""
        height 1rem
        left 50%
        margin-left -.3rem
        margin-top -.6rem
        position absolute
        top 50%
        transform rotate(45deg)
        width .6rem


    &:indeterminate + .form__icon
      background $color-primary
      border-color $color-primary
      &::before
        background $form-background-color
        content ""
        height .2rem
        left 50%
        margin-left -.5rem
        margin-top -.1rem
        position absolute
        top 50%
        width 1rem




.form__radio
  .form__icon
    border-radius .7rem


  input
    &:checked + .form__icon
      &::before
        background $form-background-color
        border-radius $core-radius
        content ""
        height .4rem
        left 50%
        margin-left -.2rem
        margin-top -.2rem
        position absolute
        top 50%
        width .4rem





// Form element Switch
.form__switch
  padding .2rem 2rem .2rem 3.6rem

  .form__icon
    background $color-grey-light
    background-clip padding-box
    border-radius .9rem
    height 1.8rem
    left 0
    top .3rem
    width 3rem
    &::before
      background $form-background-color
      border-radius .8rem
      content ""
      display block
      height 1.6rem
      left 0
      position absolute
      top 0
      width 1.6rem



  input
    &:checked + .form__icon
      &::before
        left 1.2rem


    &:active + .form__icon
      &::before
        background $form-background-color





// Form element Input groups
.input__group
  display flex

  .input-group-addon
    background $form-background-color
    border $core-border-width solid $core-border-color
    border-radius $core-radius
    line-height 2rem
    padding .5rem .8rem

    &.addon-sm
      font-size $form-font-size-sm
      padding .1rem .8rem

    &.addon-lg
      font-size $form-font-size-lg
      padding .9rem .8rem


  .input-group-addon,
  .input-group-btn
    flex 1 0 auto


  .form__input,
  .input-group-addon,
  .input-group-btn
    height 4.2rem
    line-height 4.2rem
    &:first-child:not(:last-child)
      border-right-radius(0)

    &:not(:first-child):not(:last-child)
      border-radius 0
      margin-left -.1rem

    &:last-child:not(:first-child)
      border-left-radius(0)
      margin-left -.1rem

    &:focus
      z-index $z-index-0



  &.input-inline
    display inline-flex



// Form disabled
.form__input,
.form__select
  &:disabled,
  &.disabled
    background-color $core-border-color
    cursor not-allowed
    opacity .5



input
  &:disabled,
  &.disabled
    & + .form__icon
      background $core-border-color
      cursor not-allowed
      opacity .5




.form__switch
  input
    &:disabled,
    &.disabled
      & + .form__icon::before
        background $form-background-color





// Form Horizontal
.form__horizontal
  padding 1.6rem

  .form__group
    display flex


  .form__checkbox,
  .form__radio,
  .form__switch
    margin .4rem 0


textarea
  &.form__input
    height auto
    padding .9rem
